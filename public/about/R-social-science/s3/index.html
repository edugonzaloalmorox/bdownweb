<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		 
			
  
    <meta name="twitter:card" content="summary"/>
    
      <meta name="twitter:image" content="/images/avatar.png" />
    
  
  
  <meta name="twitter:title" content="Quantitative social science with R"/>
  <meta name="twitter:description" content="exclude: true
Outline .pull-left[1. Visualise data
 - quantitative data - qualitative data  Analyse data
 tidy
 augment ]
   .pull-right[
     ] class: center, middle
  ggplot2 ## Quantitative data  ggplot2  ggplot2 is one of the most developed packages in R
 It is based on the grammar of graphics
     Element What is    Data The raw data that you want to plot  Geometries The geometric shapes that will represent the data."/>
  
    <meta name="twitter:site" content="@your_twitter_id"/>
  
  
  
  
    <meta name="twitter:creator" content="@Edu Gonzalo Almorox"/>
  



		
		<meta name="author" content="Edu Gonzalo Almorox">
		
		<meta name="generator" content="Hugo 0.29" />
		<title>Quantitative social science with R &middot; Edu Gonzalo Almorox</title>
		<link rel="shortcut icon" href="/images/favicon.ico">
		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/highlight.css">

		
		<link rel="stylesheet" href="/css/font-awesome.min.css">
		

		
		<link href="/index.xml" rel="alternate" type="application/rss+xml" title="Edu Gonzalo Almorox" />
		

		
	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='/'> <span class="arrow">←</span>Home</a>
	
	<a href='/posts'>Archive</a>
	<a href='/tags'>Tags</a>
	<a href='/about'>About Me</a>

	

	
	<a class="cta" href="/index.xml">Subscribe</a>
	
</nav>


        <section id="wrapper" class="post">
            <article>
                <header>
                    <h1>
                        Quantitative social science with R
                    </h1>
                    <h2 class="headline">
                    Jan 1, 0001 00:00
                    · 835 words
                    · 4 minute read
                      <span class="tags">
                      
                      </span>
                    </h2>
                </header>
                
                  
                
                <section id="post-body">
                    <p>exclude: true</p>
<hr />
<div id="outline" class="section level1">
<h1>Outline</h1>
<p>.pull-left[1. Visualise data</p>
<pre><code>  - quantitative data
  
  - qualitative data
  </code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p>Analyse data</p>
<ul>
<li><p>tidy</p></li>
<li><p>augment ]</p></li>
</ul></li>
</ol>
<p>.pull-right[</p>
<figure>
<img src="https://s3.amazonaws.com/lowres.cartoonstock.com/computers-data-big_data-data_mining-data_mines-data_lakes-jcen1586_low.jpg">
<figcaption>
<a href=""></a>
</figcaption>
</figure>
<div id="section" class="section level2">
<h2>]</h2>
<p>class: center, middle</p>
</div>
</div>
<div id="ggplot2" class="section level1">
<h1>ggplot2</h1>
<div id="quantitative-data" class="section level2">
<h2>## Quantitative data</h2>
</div>
<div id="ggplot2-1" class="section level2">
<h2>ggplot2</h2>
<ul>
<li><p><a href="http://ggplot2.org"><code>ggplot2</code></a> is one of the most developed packages in R</p></li>
<li><p>It is based on the <a href="https://www.r-bloggers.com/a-simple-introduction-to-the-graphing-philosophy-of-ggplot2/">grammar of graphics</a></p></li>
</ul>
<table style="width:56%;">
<colgroup>
<col width="19%" />
<col width="36%" />
</colgroup>
<thead>
<tr class="header">
<th>Element</th>
<th>What is</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Data</td>
<td>The raw data that you want to plot</td>
</tr>
<tr class="even">
<td>Geometries</td>
<td>The geometric shapes that will represent the data.</td>
</tr>
<tr class="odd">
<td>Aethetics</td>
<td>Aesthetics of the geometric and statistical objects, such as color, size, shape and position.</td>
</tr>
<tr class="even">
<td>Scales</td>
<td>Maps between the data and the aesthetic dimensions, such as data range to plot width or factor values to colors</td>
</tr>
</tbody>
</table>
<ul>
<li><h2 id="it-is-important-to-have-a-clear-idea-of-how-the-data-are-structured">It is important to have a clear idea of how the data are structured</h2></li>
</ul>
</div>
<div id="hello-world-with-ggplot2" class="section level2">
<h2>Hello world with ggplot2</h2>
<ul>
<li>Compare two variables: e.g. the carat (<em>weight</em>) and price of the diamonds</li>
</ul>
<p>.pull-left[</p>
<p><img src="/about/R-social-science/s3_files/figure-html/unnamed-chunk-2-1.png" width="672" /> ]</p>
<p>.pull-right[</p>
<pre class="r"><code>library(ggplot2)

# data from the package
data(diamonds)

# plot
ggplot(diamonds,
       aes(x=carat, y=price))</code></pre>
<p>]</p>
<hr />
</div>
<div id="hello-world-with-ggplot2-1" class="section level2">
<h2>Hello world with ggplot2</h2>
<ul>
<li>Add more layers to define the type of plot</li>
</ul>
<p>.pull-left[</p>
<p><img src="/about/R-social-science/s3_files/figure-html/unnamed-chunk-4-1.png" width="672" /> ]</p>
<p>.pull-right[</p>
<pre class="r"><code>library(ggplot2)

# data from the package
data(diamonds)

# plot
ggplot(diamonds,
       aes(x=carat, y=price)) 
      + geom_point()</code></pre>
<p>]</p>
<hr />
</div>
<div id="hello-world-with-ggplot2-2" class="section level2">
<h2>Hello world with ggplot2</h2>
<ul>
<li>Can we improve this plot?…</li>
</ul>
<pre class="r"><code>library(tidyverse)
glimpse(diamonds)</code></pre>
<pre><code>## Observations: 53,940
## Variables: 10
## $ carat   &lt;dbl&gt; 0.23, 0.21, 0.23, 0.29, 0.31, 0.24, 0.24, 0.26, 0.22, ...
## $ cut     &lt;ord&gt; Ideal, Premium, Good, Premium, Good, Very Good, Very G...
## $ color   &lt;ord&gt; E, E, E, I, J, J, I, H, E, H, J, J, F, J, E, E, I, J, ...
## $ clarity &lt;ord&gt; SI2, SI1, VS1, VS2, SI2, VVS2, VVS1, SI1, VS2, VS1, SI...
## $ depth   &lt;dbl&gt; 61.5, 59.8, 56.9, 62.4, 63.3, 62.8, 62.3, 61.9, 65.1, ...
## $ table   &lt;dbl&gt; 55, 61, 65, 58, 58, 57, 57, 55, 61, 61, 55, 56, 61, 54...
## $ price   &lt;int&gt; 326, 326, 327, 334, 335, 336, 336, 337, 337, 338, 339,...
## $ x       &lt;dbl&gt; 3.95, 3.89, 4.05, 4.20, 4.34, 3.94, 3.95, 4.07, 3.87, ...
## $ y       &lt;dbl&gt; 3.98, 3.84, 4.07, 4.23, 4.35, 3.96, 3.98, 4.11, 3.78, ...
## $ z       &lt;dbl&gt; 2.43, 2.31, 2.31, 2.63, 2.75, 2.48, 2.47, 2.53, 2.49, ...</code></pre>
<hr />
</div>
<div id="hello-world-with-ggplot2-3" class="section level2">
<h2>Hello world with ggplot2</h2>
<ul>
<li>Can we improve this plot?… .pull-left[</li>
</ul>
<p><img src="/about/R-social-science/s3_files/figure-html/unnamed-chunk-7-1.png" width="672" /> ]</p>
<p>.pull-right[</p>
<pre class="r"><code>library(ggplot2)

# data from the package
data(diamonds)

# plot
ggplot(diamonds,
       aes(x=carat,
           y=price,
           color = cut)) +
       geom_point()</code></pre>
</div>
<div id="section-1" class="section level2">
<h2>]</h2>
</div>
<div id="hello-world-with-ggplot2-4" class="section level2">
<h2>Hello world with ggplot2</h2>
<ul>
<li>We can add more layers</li>
</ul>
<p>.pull-left[</p>
<p><img src="/about/R-social-science/s3_files/figure-html/unnamed-chunk-9-1.png" width="672" /> ]</p>
<p>.pull-right[</p>
<pre class="r"><code>library(ggplot2)

# data from the package
data(diamonds)

# plot
ggplot(diamonds,
       aes(x=carat, y=price, color = cut)) +
       geom_point() +
       geom_smooth()</code></pre>
<p>]</p>
</div>
<div id="refinements" class="section level2">
<h2>Refinements</h2>
<ul>
<li>Transparency and labels</li>
</ul>
<p>.pull-left[</p>
<p><img src="/about/R-social-science/s3_files/figure-html/unnamed-chunk-13-1.png" width="672" /> ]</p>
<p>.pull-right[</p>
<pre class="r"><code>library(ggplot2)

# plot
ggplot(diamonds, aes(x=carat,
                     y=price)) + 
  geom_point(aes(color=cut),
             alpha = 0.5) +
  labs(title=&quot;My beautiful plot&quot;,
       x=&quot;The Carat&quot;,
       y=&quot;The Price&quot;,
       caption = &quot;www.mydatasource.com&quot;) +
  geom_smooth() </code></pre>
<p>]</p>
</div>
<div id="barplots" class="section level2">
<h2>Barplots</h2>
<ul>
<li>How many observations of each cut?</li>
</ul>
<p>.pull-left[</p>
<p><img src="/about/R-social-science/s3_files/figure-html/unnamed-chunk-15-1.png" width="672" /> ]</p>
<p>.pull-right[</p>
<pre class="r"><code>library(ggplot2)

g &lt;- ggplot(diamonds, aes(cut))

g + geom_bar()</code></pre>
<p>]</p>
<ul>
<li><strong>Challenge</strong>: try to run <code>geom_histogram()</code>. What happens?</li>
</ul>
</div>
<div id="barplots-1" class="section level2">
<h2>Barplots</h2>
<ul>
<li>Can we represent this information in a different way?</li>
</ul>
<p>.pull-left[</p>
<p><img src="/about/R-social-science/s3_files/figure-html/unnamed-chunk-19-1.png" width="672" /> ]</p>
<p>.pull-right[</p>
<pre class="r"><code>library(ggplot2)

g &lt;- ggplot(diamonds, aes(cut))

g + geom_bar(aes(fill = color)) +
coord_flip() +
   theme(legend.position = &quot;top&quot;)</code></pre>
<p>]</p>
</div>
<div id="barplots-2" class="section level2">
<h2>Barplots</h2>
<p><img src="/about/R-social-science/s3_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
<div id="case-study" class="section level2">
<h2>Case study</h2>
<ul>
<li>Format and structure of the data</li>
</ul>
<pre class="r"><code> library(dplyr)
 library(ggplot2)
 library(janitor)
 library(rio)

# format dta
mobi = import(&quot;data/edudata.dta&quot;)

glimpse(mobi)</code></pre>
<pre><code>## Observations: 10,000
## Variables: 4
## $ id     &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, ...
## $ class1 &lt;dbl&gt; 1, 2, 3, 5, 4, 2, 4, 1, 5, 4, 3, 4, 4, 2, 5, 2, 2, 1, 4...
## $ class2 &lt;dbl&gt; 1, 3, 4, 1, 2, 5, 3, 2, 5, 1, 2, 4, 4, 5, 4, 4, 2, 1, 3...
## $ class3 &lt;dbl&gt; 1, 5, 5, 2, 2, 5, 5, 5, 1, 4, 1, 4, 4, 5, 5, 2, 1, 2, 3...</code></pre>
</div>
<div id="case-study-1" class="section level2">
<h2>Case study</h2>
<ul>
<li>Visualise data</li>
</ul>
<p>.pull-left[</p>
<pre class="r"><code> # plot
 a = ggplot(df_linked,
    aes(category,
        percent,
        fill = class))+ 
  geom_bar(stat=&quot;identity&quot;)</code></pre>
<p>]</p>
<p>.pull-right[ <img src="/about/R-social-science/s3_files/figure-html/unnamed-chunk-27-1.png" width="672" />]</p>
</div>
<div id="broom" class="section level2">
<h2>broom</h2>
<ul>
<li><p><a href="https://cran.r-project.org/web/packages/broom/broom.pdf">broom</a> creates tidy data frames derived from the results of your models</p></li>
<li><p>Focus on the output of the model</p></li>
<li><p>Great compatibility with dplyr functions</p></li>
</ul>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Element</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tidy()</td>
<td>component-level statistics</td>
</tr>
<tr class="even">
<td>augment()</td>
<td>observation-level statistics</td>
</tr>
<tr class="odd">
<td>glance()</td>
<td>model-level statistics</td>
</tr>
</tbody>
</table>
</div>
<div id="broom-1" class="section level2">
<h2>broom</h2>
<ul>
<li>Get tidy results of your model</li>
</ul>
<pre class="r"><code>library(broom)

data(mtcars)
lmfit &lt;- lm(mpg ~ wt+ qsec, mtcars)
lmfit_tidy = tidy(lmfit, conf.int = TRUE)

head(lmfit_tidy, 4)</code></pre>
<pre><code>##          term  estimate std.error  statistic      p.value   conf.low
## 1 (Intercept) 19.746223 5.2520617   3.759709 7.650466e-04  9.0045503
## 2          wt -5.047982 0.4839974 -10.429771 2.518948e-11 -6.0378678
## 3        qsec  0.929198 0.2650173   3.506179 1.499883e-03  0.3871768
##   conf.high
## 1 30.487895
## 2 -4.058096
## 3  1.471219</code></pre>
</div>
<div id="broom-2" class="section level2">
<h2>broom</h2>
<ul>
<li>Get information referred to the observations</li>
</ul>
<pre class="r"><code>library(broom)

lmfit_augmented = augment(lmfit)

head(lmfit_augmented, 4)</code></pre>
<pre><code>##        .rownames  mpg    wt  qsec  .fitted   .se.fit      .resid
## 1      Mazda RX4 21.0 2.620 16.46 21.81511 0.6832424 -0.81510855
## 2  Mazda RX4 Wag 21.0 2.875 17.02 21.04822 0.5468271 -0.04822401
## 3     Datsun 710 22.8 2.320 18.61 25.32728 0.6397681 -2.52727880
## 4 Hornet 4 Drive 21.4 3.215 19.44 21.58057 0.6231436 -0.18056924
##         .hat   .sigma      .cooksd  .std.resid
## 1 0.06925986 2.637300 2.627038e-03 -0.32543724
## 2 0.04436414 2.642112 5.587076e-06 -0.01900129
## 3 0.06072636 2.595763 2.174253e-02 -1.00443793
## 4 0.05761138 2.641895 1.046036e-04 -0.07164647</code></pre>
<hr />
<p>class: center, middle</p>
</div>
</div>
<div id="thanks" class="section level1">
<h1>Thanks!</h1>
<p><span class="citation">[@EdudinGonzalo]</span>(<a href="https://twitter.com/EdudinGonzalo" class="uri">https://twitter.com/EdudinGonzalo</a>)</p>
<p><code>e.gonzalo-almorox@newcastle.ac.uk</code></p>
</div>

                </section>
            </article>

            
                <a class="twitter" href="https://twitter.com/intent/tweet?text=%2fabout%2fr-social-science%2fs3%2f - Quantitative%20social%20science%20with%20R by @your_twitter_id"><span class="icon-twitter"> tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

            

            
                <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'your_disqus_short_name'; 

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

            

            

            <footer id="footer">
    
        <div id="social">

	
	
    <a class="symbol" href="https://github.com/edugonzaloalmorox">
        <i class="fa fa-github-square"></i>
    </a>
    
    <a class="symbol" href="https://www.linkedin.com/in/eduardo-gonzalo-almorox-5b8b4955/">
        <i class="fa fa-linkedin-square"></i>
    </a>
    
    <a class="symbol" href="https://twitter.com/EdudinGonzalo">
        <i class="fa fa-twitter-square"></i>
    </a>
    


</div>

    
    <p class="small">
    
       © Copyright 2018 <i class="fa fa-heart" aria-hidden="true"></i> Edu Gonzalo Almorox
    
    </p>
    <p class="small">
        Powered by <a href="http://www.gohugo.io/">Hugo</a> Theme By <a href="https://github.com/nodejh/hugo-theme-cactus-plus">nodejh</a>
    </p>
</footer>

        </section>

        <script src="/js/jquery-3.3.1.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




  
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'your_google_analytics_id', 'auto');
ga('send', 'pageview');
</script>





    </body>
</html>
